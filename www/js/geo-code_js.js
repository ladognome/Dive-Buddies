var f=null,GeoCode=function(){var e=!0,i=[],a=[],t=[],o=[],l=["Pterois volitans","Coris bulbifrons","Seriola lalandi","Thalassoma lunare","Canthigaster callisternus","Pseudanthias pictilis","Alutarius macracanthus","Trachypoma macracanthus","Xyrichtys niger","Epinephelus undulatostriatus"],n=["Aequipecten nux","Sepioteuthis lessoniana","Aplysia dactylomela","Conus arenatus","Ctena bella","Diacria trispinosa","Sepia bandensis","Drupa morum","Engina zonalis","Umbraculum sinicum"],s=["Acropora glauca","Acropora solitaryensis","Madrepora hyacinthus","Parascolymia vitiensis","Acropora yongei","Acanthastrea bowerbanki","Isopora palifera","Goniopora lichen","Stephanocyathus spiniger","Pavona minuta"];return $("#fishTab").click(function(){console.log("clicked fish"),document.getElementById("fishTab").style.backgroundColor="lightblue",document.getElementById("mollusksTab").style.backgroundColor="white",document.getElementById("coralsTabs").style.backgroundColor="white";var e=39;if(filler="",0==a.length)filler+='<li class="widget uib_w_'+String(e)+'" data-uib="app_framework/listitem" data-ver="1"><a>No Fishes Found</i></a></li>\n',e++;else for(var i in a){try{species_id=eolDataFile.getSpeciesID(a[i]),imageURL=eolDataFile.getImageInfo(species_id),imageHTML='<img src="'+imageURL[0]+'" width="150"></img>'}catch(t){imageURL="images/imageNotFound.png",imageHTML='<img src="'+imageURL+'" width="150"></img>'}var o="";imageURL[1]===!0&&(o='<img width="25px" height="25px" src="http://i.imgur.com/gEieG9S.png"></img>'),filler+='<li style="background-image: url('+imageURL[0]+'); background-size: 100% 200px; background-repeat: no-repeat; height:210px; -webkit-text-fill-color: white;  -webkit-text-stroke-width: 0.8px; -webkit-text-stroke-color: black; font-size:25px; font-weight: bold;" id="animal_selection" class="widget uib_w_'+String(e)+'" data-uib="app_framework/listitem" data-ver="1"><a><i>'+a[i]+"</i></a>"+o+"</li>\n",e++}document.getElementById("list_display").innerHTML=filler}),$("#mollusksTab").click(function(){console.log("clicked mollusks"),document.getElementById("fishTab").style.backgroundColor="white",document.getElementById("mollusksTab").style.backgroundColor="lightblue",document.getElementById("coralsTabs").style.backgroundColor="white";var e=39;if(filler="",0==t.length)filler+='<li class="widget uib_w_'+String(e)+'" data-uib="app_framework/listitem" data-ver="1"><a>No Mollusks Found</i></a></li>\n',e++;else for(var i in t){try{species_id=eolDataFile.getSpeciesID(t[i]),imageURL=eolDataFile.getImageInfo(species_id),imageHTML='<img src="'+imageURL[0]+'" width="150"></img>'}catch(a){imageURL="images/imageNotFound.png",imageHTML='<img src="'+imageURL+'" width="150"></img>'}var o="";imageURL[1]===!0&&(o='<img width="25px" height="25px" src="http://i.imgur.com/gEieG9S.png"></img>'),filler+='<li style="background-image: url('+imageURL[0]+'); background-size: 100% 200px; background-repeat: no-repeat; height:210px; -webkit-text-fill-color: white;  -webkit-text-stroke-width: 0.8px; -webkit-text-stroke-color: black; font-size:25px; font-weight: bold;" id="animal_selection" class="widget uib_w_'+String(e)+'" data-uib="app_framework/listitem" data-ver="1"><a><i>'+t[i]+"</i></a>"+o+"</li>\n",e++}document.getElementById("list_display").innerHTML=filler}),$("#coralsTabs").click(function(){console.log("clicked corals"),document.getElementById("fishTab").style.backgroundColor="white",document.getElementById("mollusksTab").style.backgroundColor="white",document.getElementById("coralsTabs").style.backgroundColor="lightblue";var e=39;if(filler="",0==o.length)filler+='<li class="widget uib_w_'+String(e)+'" data-uib="app_framework/listitem" data-ver="1"><a>No Corals Found</i></a></li>\n',e++;else for(var i in o){try{species_id=eolDataFile.getSpeciesID(o[i]),imageURL=eolDataFile.getImageInfo(species_id),imageHTML='<img src="'+imageURL[0]+'" width="150"></img>'}catch(a){imageURL="images/imageNotFound.png",imageHTML='<img src="'+imageURL+'" width="150"></img>'}var t="";imageURL[1]===!0&&(t='<img width="25px" height="25px" src="http://i.imgur.com/gEieG9S.png"></img>'),filler+='<li style="background-image: url('+imageURL[0]+'); background-size: 100% 200px; background-repeat: no-repeat; height:210px; -webkit-text-fill-color: white;  -webkit-text-stroke-width: 0.8px; -webkit-text-stroke-color: black; font-size:25px; font-weight: bold;" id="animal_selection" class="widget uib_w_'+String(e)+'" data-uib="app_framework/listitem" data-ver="1"><a><i>'+o[i]+"</i></a>"+t+"</li>\n",e++}document.getElementById("list_display").innerHTML=filler}),$("#enterlocation").onfocus=function(){initialize()},$("#predive").click(function(){i=[],a=[],t=[],o=[];var r=new Date;r.setMonth(r.getMonth()-3),console.log("inside predive"),console.log(f),lat=localStorage.getItem("lat"),long=localStorage.getItem("long"),long>158&&long<160&&lat>-32&&lat<-31?(console.log("coordinates match"),e=!0):e=!1,fo="POLYGON(("+String(Math.floor(long-1))+" "+String(Math.floor(lat-1))+", "+String(Math.floor(long-1))+" "+String(Math.floor(lat+1))+", "+String(Math.floor(long+1))+" "+String(Math.floor(lat+1))+", "+String(Math.floor(long+1))+" "+String(Math.floor(lat-1))+", "+String(Math.floor(long-1))+" "+String(Math.floor(lat-1))+"))",$.ajax({type:"GET",url:"http://api.iobis.org/taxa",contentType:"application/json; charset=utf-8",dataType:"jsonp",data:{geometry:String(fo),limit:1e3},success:function(r){if(1==e)console.log("Flag is true, proceeding to specific display"),i=["Pterois volitans","Coris bulbifrons","Seriola lalandi","Thalassoma lunare","Canthigaster callisternus","Pseudanthias pictilis","Alutarius macracanthus","Trachypoma macracanthus","Xyrichtys niger","Epinephelus undulatostriatus","Aequipecten nux","Sepioteuthis lessoniana","Aplysia dactylomela","Conus arenatus","Ctena bella","Diacria trispinosa","Sepia bandensis","Drupa morum","Engina zonalis","Umbraculum sinicum","Acropora glauca","Acropora solitaryensis","Madrepora hyacinthus","Parascolymia vitiensis","Acropora yongei","Acanthastrea bowerbanki","Isopora palifera","Goniopora lichen","Stephanocyathus spiniger","Pavona minuta"],t=n,o=s,a=l;else{console.log("Flag is not true, proceed to generic display"),console.log("data count "+r.count);var g=[];for(var c in r)g.push(c);console.log("total "+g.length+" keys: "+g),console.log(r.results);for(var u=0;u<r.results.length;u++)null!=r.results[u]&&"undefined"!=typeof r.results[u].species&&i.push([r.results[u].records,r.results[u].species,r.results[u].phylum]);i.sort(function(e,i){return e[1]-i[1]}),i.reverse(),console.log("format of name list"),console.log(i);for(var u=0;u<i.length;u++)"Mollusca"==i[u][2]&&t.length<10&&"undefined"!=i[u][1]?t.push(i[u][1]):"Chordata"==i[u][2]&&a.length<10&&"undefined"!=i[u][1]?a.push(i[u][1]):"Cnidaria"==i[u][2]&&o.length<10&&"undefined"!=i[u][1]&&o.push(i[u][1])}console.log("List of fish"),console.log(a),console.log("List of Mollusks"),console.log(t),console.log("List of corals"),console.log(o),console.log(i[0])},error:function(e,i){console.log("Problem")}})}),{}}();